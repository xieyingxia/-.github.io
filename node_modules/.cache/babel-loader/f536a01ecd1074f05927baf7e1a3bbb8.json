{"ast":null,"code":"import aliases from './aliases';\nimport parentLocales from './parentLocales';\nimport { invariant } from './invariant';\n/**\n * https://tc39.es/ecma262/#sec-toobject\n * @param arg\n */\n\nexport function toObject(arg) {\n  if (arg == null) {\n    throw new TypeError('undefined/null cannot be converted to object');\n  }\n\n  return Object(arg);\n}\n/**\n * https://tc39.es/ecma402/#sec-getoption\n * @param opts\n * @param prop\n * @param type\n * @param values\n * @param fallback\n */\n\nexport function getOption(opts, prop, type, values, fallback) {\n  // const descriptor = Object.getOwnPropertyDescriptor(opts, prop);\n  var value = opts[prop];\n\n  if (value !== undefined) {\n    if (type !== 'boolean' && type !== 'string') {\n      throw new TypeError('invalid type');\n    }\n\n    if (type === 'boolean') {\n      value = Boolean(value);\n    }\n\n    if (type === 'string') {\n      value = String(value);\n    }\n\n    if (values !== undefined && !values.filter(function (val) {\n      return val == value;\n    }).length) {\n      throw new RangeError(value + \" in not within \" + values);\n    }\n\n    return value;\n  }\n\n  return fallback;\n}\n/**\n * https://tc39.es/ecma402/#sec-defaultnumberoption\n * @param val\n * @param min\n * @param max\n * @param fallback\n */\n\nexport function defaultNumberOption(val, min, max, fallback) {\n  if (val !== undefined) {\n    val = Number(val);\n\n    if (isNaN(val) || val < min || val > max) {\n      throw new RangeError(val + \" is outside of range [\" + min + \", \" + max + \"]\");\n    }\n\n    return Math.floor(val);\n  }\n\n  return fallback;\n}\n/**\n * https://tc39.es/ecma402/#sec-getnumberoption\n * @param options\n * @param property\n * @param min\n * @param max\n * @param fallback\n */\n\nexport function getNumberOption(options, property, minimum, maximum, fallback) {\n  var val = options[property];\n  return defaultNumberOption(val, minimum, maximum, fallback);\n}\nexport function getAliasesByLang(lang) {\n  return Object.keys(aliases).reduce(function (all, locale) {\n    if (locale.split('-')[0] === lang) {\n      all[locale] = aliases[locale];\n    }\n\n    return all;\n  }, {});\n}\nexport function getParentLocalesByLang(lang) {\n  return Object.keys(parentLocales).reduce(function (all, locale) {\n    if (locale.split('-')[0] === lang) {\n      all[locale] = parentLocales[locale];\n    }\n\n    return all;\n  }, {});\n}\nexport function setInternalSlot(map, pl, field, value) {\n  if (!map.get(pl)) {\n    map.set(pl, Object.create(null));\n  }\n\n  var slots = map.get(pl);\n  slots[field] = value;\n}\nexport function setMultiInternalSlots(map, pl, props) {\n  for (var k in props) {\n    setInternalSlot(map, pl, k, props[k]);\n  }\n}\nexport function getInternalSlot(map, pl, field) {\n  return getMultiInternalSlots(map, pl, field)[field];\n}\nexport function getMultiInternalSlots(map, pl) {\n  var fields = [];\n\n  for (var _i = 2; _i < arguments.length; _i++) {\n    fields[_i - 2] = arguments[_i];\n  }\n\n  var slots = map.get(pl);\n\n  if (!slots) {\n    throw new TypeError(pl + \" InternalSlot has not been initialized\");\n  }\n\n  return fields.reduce(function (all, f) {\n    all[f] = slots[f];\n    return all;\n  }, Object.create(null));\n}\nexport function isLiteralPart(patternPart) {\n  return patternPart.type === 'literal';\n}\nexport function partitionPattern(pattern) {\n  var result = [];\n  var beginIndex = pattern.indexOf('{');\n  var endIndex = 0;\n  var nextIndex = 0;\n  var length = pattern.length;\n\n  while (beginIndex < pattern.length && beginIndex > -1) {\n    endIndex = pattern.indexOf('}', beginIndex);\n    invariant(endIndex > beginIndex, \"Invalid pattern \" + pattern);\n\n    if (beginIndex > nextIndex) {\n      result.push({\n        type: 'literal',\n        value: pattern.substring(nextIndex, beginIndex)\n      });\n    }\n\n    result.push({\n      type: pattern.substring(beginIndex + 1, endIndex),\n      value: undefined\n    });\n    nextIndex = endIndex + 1;\n    beginIndex = pattern.indexOf('{', nextIndex);\n  }\n\n  if (nextIndex < length) {\n    result.push({\n      type: 'literal',\n      value: pattern.substring(nextIndex, length)\n    });\n  }\n\n  return result;\n}\n/**\n * https://tc39.es/ecma402/#sec-setnfdigitoptions\n * https://tc39.es/proposal-unified-intl-numberformat/section11/numberformat_diff_out.html#sec-setnfdigitoptions\n * @param intlObj\n * @param opts\n * @param mnfdDefault\n * @param mxfdDefault\n */\n\nexport function setNumberFormatDigitOptions(internalSlotMap, intlObj, opts, mnfdDefault, mxfdDefault) {\n  var mnid = getNumberOption(opts, 'minimumIntegerDigits', 1, 21, 1);\n  var mnfd = opts.minimumFractionDigits;\n  var mxfd = opts.maximumFractionDigits;\n  var mnsd = opts.minimumSignificantDigits;\n  var mxsd = opts.maximumSignificantDigits;\n  setInternalSlot(internalSlotMap, intlObj, 'minimumIntegerDigits', mnid);\n\n  if (mnsd !== undefined || mxsd !== undefined) {\n    setInternalSlot(internalSlotMap, intlObj, 'roundingType', 'significantDigits');\n    mnsd = defaultNumberOption(mnsd, 1, 21, 1);\n    mxsd = defaultNumberOption(mxsd, mnsd, 21, 21);\n    setInternalSlot(internalSlotMap, intlObj, 'minimumSignificantDigits', mnsd);\n    setInternalSlot(internalSlotMap, intlObj, 'maximumSignificantDigits', mxsd);\n  } else if (mnfd !== undefined || mxfd !== undefined) {\n    setInternalSlot(internalSlotMap, intlObj, 'roundingType', 'fractionDigits');\n    mnfd = defaultNumberOption(mnfd, 0, 20, mnfdDefault);\n    var mxfdActualDefault = Math.max(mnfd, mxfdDefault);\n    mxfd = defaultNumberOption(mxfd, mnfd, 20, mxfdActualDefault);\n    setInternalSlot(internalSlotMap, intlObj, 'minimumFractionDigits', mnfd);\n    setInternalSlot(internalSlotMap, intlObj, 'maximumFractionDigits', mxfd);\n  } else if (getInternalSlot(internalSlotMap, intlObj, 'notation') === 'compact') {\n    setInternalSlot(internalSlotMap, intlObj, 'roundingType', 'compactRounding');\n  } else {\n    setInternalSlot(internalSlotMap, intlObj, 'roundingType', 'fractionDigits');\n    setInternalSlot(internalSlotMap, intlObj, 'minimumFractionDigits', mnfdDefault);\n    setInternalSlot(internalSlotMap, intlObj, 'maximumFractionDigits', mxfdDefault);\n  }\n}\nexport function objectIs(x, y) {\n  if (Object.is) {\n    return Object.is(x, y);\n  } // SameValue algorithm\n\n\n  if (x === y) {\n    // Steps 1-5, 7-10\n    // Steps 6.b-6.e: +0 != -0\n    return x !== 0 || 1 / x === 1 / y;\n  } // Step 6.a: NaN == NaN\n\n\n  return x !== x && y !== y;\n}","map":{"version":3,"sources":["/Users/xiangmingxin/个人项目/react_shop/react/react_shop/node_modules/_@formatjs_intl-utils@2.0.4@@formatjs/intl-utils/lib/polyfill-utils.js"],"names":["aliases","parentLocales","invariant","toObject","arg","TypeError","Object","getOption","opts","prop","type","values","fallback","value","undefined","Boolean","String","filter","val","length","RangeError","defaultNumberOption","min","max","Number","isNaN","Math","floor","getNumberOption","options","property","minimum","maximum","getAliasesByLang","lang","keys","reduce","all","locale","split","getParentLocalesByLang","setInternalSlot","map","pl","field","get","set","create","slots","setMultiInternalSlots","props","k","getInternalSlot","getMultiInternalSlots","fields","_i","arguments","f","isLiteralPart","patternPart","partitionPattern","pattern","result","beginIndex","indexOf","endIndex","nextIndex","push","substring","setNumberFormatDigitOptions","internalSlotMap","intlObj","mnfdDefault","mxfdDefault","mnid","mnfd","minimumFractionDigits","mxfd","maximumFractionDigits","mnsd","minimumSignificantDigits","mxsd","maximumSignificantDigits","mxfdActualDefault","objectIs","x","y","is"],"mappings":"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","sourcesContent":["import aliases from './aliases';\nimport parentLocales from './parentLocales';\nimport { invariant } from './invariant';\n/**\n * https://tc39.es/ecma262/#sec-toobject\n * @param arg\n */\nexport function toObject(arg) {\n    if (arg == null) {\n        throw new TypeError('undefined/null cannot be converted to object');\n    }\n    return Object(arg);\n}\n/**\n * https://tc39.es/ecma402/#sec-getoption\n * @param opts\n * @param prop\n * @param type\n * @param values\n * @param fallback\n */\nexport function getOption(opts, prop, type, values, fallback) {\n    // const descriptor = Object.getOwnPropertyDescriptor(opts, prop);\n    var value = opts[prop];\n    if (value !== undefined) {\n        if (type !== 'boolean' && type !== 'string') {\n            throw new TypeError('invalid type');\n        }\n        if (type === 'boolean') {\n            value = Boolean(value);\n        }\n        if (type === 'string') {\n            value = String(value);\n        }\n        if (values !== undefined && !values.filter(function (val) { return val == value; }).length) {\n            throw new RangeError(value + \" in not within \" + values);\n        }\n        return value;\n    }\n    return fallback;\n}\n/**\n * https://tc39.es/ecma402/#sec-defaultnumberoption\n * @param val\n * @param min\n * @param max\n * @param fallback\n */\nexport function defaultNumberOption(val, min, max, fallback) {\n    if (val !== undefined) {\n        val = Number(val);\n        if (isNaN(val) || val < min || val > max) {\n            throw new RangeError(val + \" is outside of range [\" + min + \", \" + max + \"]\");\n        }\n        return Math.floor(val);\n    }\n    return fallback;\n}\n/**\n * https://tc39.es/ecma402/#sec-getnumberoption\n * @param options\n * @param property\n * @param min\n * @param max\n * @param fallback\n */\nexport function getNumberOption(options, property, minimum, maximum, fallback) {\n    var val = options[property];\n    return defaultNumberOption(val, minimum, maximum, fallback);\n}\nexport function getAliasesByLang(lang) {\n    return Object.keys(aliases).reduce(function (all, locale) {\n        if (locale.split('-')[0] === lang) {\n            all[locale] = aliases[locale];\n        }\n        return all;\n    }, {});\n}\nexport function getParentLocalesByLang(lang) {\n    return Object.keys(parentLocales).reduce(function (all, locale) {\n        if (locale.split('-')[0] === lang) {\n            all[locale] = parentLocales[locale];\n        }\n        return all;\n    }, {});\n}\nexport function setInternalSlot(map, pl, field, value) {\n    if (!map.get(pl)) {\n        map.set(pl, Object.create(null));\n    }\n    var slots = map.get(pl);\n    slots[field] = value;\n}\nexport function setMultiInternalSlots(map, pl, props) {\n    for (var k in props) {\n        setInternalSlot(map, pl, k, props[k]);\n    }\n}\nexport function getInternalSlot(map, pl, field) {\n    return getMultiInternalSlots(map, pl, field)[field];\n}\nexport function getMultiInternalSlots(map, pl) {\n    var fields = [];\n    for (var _i = 2; _i < arguments.length; _i++) {\n        fields[_i - 2] = arguments[_i];\n    }\n    var slots = map.get(pl);\n    if (!slots) {\n        throw new TypeError(pl + \" InternalSlot has not been initialized\");\n    }\n    return fields.reduce(function (all, f) {\n        all[f] = slots[f];\n        return all;\n    }, Object.create(null));\n}\nexport function isLiteralPart(patternPart) {\n    return patternPart.type === 'literal';\n}\nexport function partitionPattern(pattern) {\n    var result = [];\n    var beginIndex = pattern.indexOf('{');\n    var endIndex = 0;\n    var nextIndex = 0;\n    var length = pattern.length;\n    while (beginIndex < pattern.length && beginIndex > -1) {\n        endIndex = pattern.indexOf('}', beginIndex);\n        invariant(endIndex > beginIndex, \"Invalid pattern \" + pattern);\n        if (beginIndex > nextIndex) {\n            result.push({\n                type: 'literal',\n                value: pattern.substring(nextIndex, beginIndex),\n            });\n        }\n        result.push({\n            type: pattern.substring(beginIndex + 1, endIndex),\n            value: undefined,\n        });\n        nextIndex = endIndex + 1;\n        beginIndex = pattern.indexOf('{', nextIndex);\n    }\n    if (nextIndex < length) {\n        result.push({\n            type: 'literal',\n            value: pattern.substring(nextIndex, length),\n        });\n    }\n    return result;\n}\n/**\n * https://tc39.es/ecma402/#sec-setnfdigitoptions\n * https://tc39.es/proposal-unified-intl-numberformat/section11/numberformat_diff_out.html#sec-setnfdigitoptions\n * @param intlObj\n * @param opts\n * @param mnfdDefault\n * @param mxfdDefault\n */\nexport function setNumberFormatDigitOptions(internalSlotMap, intlObj, opts, mnfdDefault, mxfdDefault) {\n    var mnid = getNumberOption(opts, 'minimumIntegerDigits', 1, 21, 1);\n    var mnfd = opts.minimumFractionDigits;\n    var mxfd = opts.maximumFractionDigits;\n    var mnsd = opts.minimumSignificantDigits;\n    var mxsd = opts.maximumSignificantDigits;\n    setInternalSlot(internalSlotMap, intlObj, 'minimumIntegerDigits', mnid);\n    if (mnsd !== undefined || mxsd !== undefined) {\n        setInternalSlot(internalSlotMap, intlObj, 'roundingType', 'significantDigits');\n        mnsd = defaultNumberOption(mnsd, 1, 21, 1);\n        mxsd = defaultNumberOption(mxsd, mnsd, 21, 21);\n        setInternalSlot(internalSlotMap, intlObj, 'minimumSignificantDigits', mnsd);\n        setInternalSlot(internalSlotMap, intlObj, 'maximumSignificantDigits', mxsd);\n    }\n    else if (mnfd !== undefined || mxfd !== undefined) {\n        setInternalSlot(internalSlotMap, intlObj, 'roundingType', 'fractionDigits');\n        mnfd = defaultNumberOption(mnfd, 0, 20, mnfdDefault);\n        var mxfdActualDefault = Math.max(mnfd, mxfdDefault);\n        mxfd = defaultNumberOption(mxfd, mnfd, 20, mxfdActualDefault);\n        setInternalSlot(internalSlotMap, intlObj, 'minimumFractionDigits', mnfd);\n        setInternalSlot(internalSlotMap, intlObj, 'maximumFractionDigits', mxfd);\n    }\n    else if (getInternalSlot(internalSlotMap, intlObj, 'notation') === 'compact') {\n        setInternalSlot(internalSlotMap, intlObj, 'roundingType', 'compactRounding');\n    }\n    else {\n        setInternalSlot(internalSlotMap, intlObj, 'roundingType', 'fractionDigits');\n        setInternalSlot(internalSlotMap, intlObj, 'minimumFractionDigits', mnfdDefault);\n        setInternalSlot(internalSlotMap, intlObj, 'maximumFractionDigits', mxfdDefault);\n    }\n}\nexport function objectIs(x, y) {\n    if (Object.is) {\n        return Object.is(x, y);\n    }\n    // SameValue algorithm\n    if (x === y) {\n        // Steps 1-5, 7-10\n        // Steps 6.b-6.e: +0 != -0\n        return x !== 0 || 1 / x === 1 / y;\n    }\n    // Step 6.a: NaN == NaN\n    return x !== x && y !== y;\n}\n"]},"metadata":{},"sourceType":"module"}